import{a as C,j as e,i as w,r as d}from"./index-CAMe3TI6.js";import{A as v}from"./AntModal-BTXWNXnZ.js";import{C as L}from"./CustomTable-DhV1aYU1.js";import{a as S,g as k}from"./customer-Bih9Fem2.js";import{A}from"./AntInput-ws5y_prr.js";import{A as T}from"./AntSelect-fXGbbSnZ.js";import{A as c}from"./index-BoqRkbOK.js";import{f as i}from"./helper-C9sI7YaD.js";import"./AntRangePicker-BqDMmJ2c.js";import"./dayjs.min-BaUnGTgK.js";import{c as R}from"./dropdownApi-Bha4TmMs.js";import{R as B}from"./SearchOutlined-B0i9Qu2P.js";import{R as F}from"./ClearOutlined-DhwgvrB0.js";import"./roundedArrow-DTDULg7k.js";import"./useMergedState-1vUmmcAS.js";import"./bundle-mjs-Bbh6cNEC.js";import"./pagination.utils-Dq4giu9F.js";import"./doctype-strings-C-G4L_vj.js";import"./index-D5M48et9.js";import"./LeftOutlined-9vg3d2iC.js";const I=t=>{const l=C();return[{key:"Sl",title:"SL",render:(a,s,o)=>e.jsx("span",{children:o+1})},{key:"customer_name",title:"Customer Name"},{key:"territory",title:"Territory Name"},{key:"excel_remaining_balance",title:"Credit Limit",render:a=>i(a)},{key:"current_outstanding",title:"Current Outstanding",render:a=>i(a)},{key:"custom_other_brands_limit",title:"Remaining Credit",render:a=>e.jsx("span",{className:"text-red-500",children:i(a)})},{key:"brand_wise_limit",title:"Brand Wise Limit",render:(a,s)=>e.jsx(c,{size:"small",type:"primary",onClick:()=>{t(s.customer_name),l(w({type:"brand-wise-limit",isOpen:!0}))},children:"Details"})}]},E=({customerDocument:t})=>{var l,a;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white dark:bg-darkmode rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center my-4",children:[e.jsxs("div",{className:"text-lg font-semibold",children:["Total Remaining Balance:"," ",e.jsx("span",{className:"text-lg font-bold",children:i((t==null?void 0:t.excel_remaining_balance)||0)})]}),e.jsxs("div",{className:"text-lg font-semibold",children:["Brand Wise Allocated Limit:"," ",e.jsx("span",{className:"text-lg font-bold",children:i(((l=t==null?void 0:t.custom_brand_wise_allocations)==null?void 0:l.reduce((s,o)=>s+o.limit,0))||0)})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{className:"bg-primary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Brand Name"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Limit Amount"})]})}),e.jsxs("tbody",{className:"bg-gray-50",children:[(a=t==null?void 0:t.custom_brand_wise_allocations)==null?void 0:a.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-left",children:s.brand}),e.jsx("td",{className:"px-6 py-4 text-left",children:i(s.limit)})]},s.name)),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-left",children:"Others"}),e.jsx("td",{className:"px-6 py-4 text-left",children:i((t==null?void 0:t.custom_other_brands_limit)||0)})]})]})]})})]})})},ae=()=>{const[t,l]=d.useState(""),[a,s]=d.useState(null),[o,m]=d.useState(null),[n,h]=d.useState(null),{data:f,isLoading:j,total:g}=S({customer_name:a!=null?a:"",territory:n!=null?n:""}),{data:y,isLoading:b,mutate:p}=k(t),{data:x,isLoading:u}=R(o);d.useEffect(()=>{t&&p()},[t,p]);const N=I(l),_=()=>{s(null),m(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center col-span-12 mt-5 intro-y xl:flex-nowrap gap-3",children:[e.jsx("h2",{className:"text-lg font-medium intro-y whitespace-nowrap",children:"Customer Profile"}),e.jsxs("div",{className:"flex w-full gap-2 flex-wrap lg:flex-nowrap",children:[e.jsx(A,{placeholder:"Customer Name",type:"text",onChange:r=>s(r.target.value),value:a!=null?a:""}),e.jsx(T,{placeholder:"Select Territory",value:n!=null?n:void 0,onChange:r=>{h(r),m(null)},onSearch:r=>m(r),loading:u,options:x==null?void 0:x.map(r=>({value:r.name,label:r.territory_name})),notFoundText:"No Territory Found"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{icon:e.jsx(B,{}),children:"Search"}),e.jsx(c,{icon:e.jsx(F,{}),onClick:_,children:"Clear"})]})]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(L,{tableHeader:N||[],data:f||[],loading:j,totalItems:g||0})}),e.jsx(v,{footer:!1,title:e.jsxs("div",{className:"text-xl font-semibold text-center border-b border-gray-200 pb-2",children:["Brand Wise Limit - ",t]}),loading:b,width:800,children:e.jsx(E,{customerDocument:y})})]})};export{ae as default};

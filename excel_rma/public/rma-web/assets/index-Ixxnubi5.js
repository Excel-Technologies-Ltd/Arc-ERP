var M=Object.defineProperty,q=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var S=(a,t,s)=>t in a?M(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,A=(a,t)=>{for(var s in t||(t={}))U.call(t,s)&&S(a,s,t[s]);if(j)for(var s of j(t))H.call(t,s)&&S(a,s,t[s]);return a},I=(a,t)=>q(a,L(t));import{r as T,j as e}from"./index-CAMe3TI6.js";import{I as B,A as c}from"./index-BoqRkbOK.js";import{A as l}from"./AntSelect-fXGbbSnZ.js";import{R as Q,a as _,A as b}from"./AntCustomTable-DbJtMrEv.js";import{A as J}from"./AntDatePicker-DybsIA1m.js";import{A as u}from"./AntInput-ws5y_prr.js";import{R as o}from"./RenderController-SaZuHdvL.js";import{S as n}from"./enums-x_SlNy7_.js";import{a as Y,u as G,c as v}from"./index.esm-DofzH5L8.js";import{A as K,T as X}from"./AntUpload-CZhHeQou.js";import"./AntRangePicker-BqDMmJ2c.js";import"./helper-C9sI7YaD.js";import"./dayjs.min-BaUnGTgK.js";import{u as Z}from"./useNotify-C6Niq53b.js";import{R as ee}from"./ClearOutlined-DhwgvrB0.js";import{R as te}from"./SendOutlined-CB75qJDb.js";import"./roundedArrow-DTDULg7k.js";import"./useMergedState-1vUmmcAS.js";import"./index-D5M48et9.js";import"./bundle-mjs-Bbh6cNEC.js";import"./LeftOutlined-9vg3d2iC.js";import"./dropdown-DQ-oMNqG.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function g(){return g=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},g.apply(this,arguments)}const se=(a,t)=>T.createElement(B,g({},a,{ref:t,icon:ae})),re=T.forwardRef(se),oe=({control:a})=>{const t=Y({control:a,name:"entry_type"});return e.jsxs("div",{className:"bg-white dark:bg-darkmode-800 p-5 rounded-md drop-shadow-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2 w-full ",children:[o(a,"territory_name",e.jsx(l,{placeholder:"Select Territory",notFoundText:"No Territory Found",options:Array.from({length:100},(s,r)=>({value:`Territory ${r+1}`,label:`Territory ${r+1}`}))})),o(a,"entry_type",e.jsx(l,{placeholder:"Select Entry Type",notFoundText:"No Entry Type Found",options:Object.entries(n).map(([,s])=>({value:s,label:s}))})),t&&t!==n.MATERIAL_TRANSFER&&o(a,"account_name",e.jsx(l,{placeholder:"Select Account",notFoundText:"No Account Found",options:Array.from({length:100},(s,r)=>({value:`Account ${r+1}`,label:`Account ${r+1}`}))})),t&&(t===n.MATERIAL_ISSUE||t===n.R_D_PRODUCTS)&&o(a,"customer_name",e.jsx(l,{placeholder:"Select Customer",notFoundText:"No Customer Found",options:Array.from({length:100},(s,r)=>({value:`Customer ${r+1}`,label:`Customer ${r+1}`}))})),o(a,"posting_date",e.jsx(J,{placeholder:"Select Posting Date"})),o(a,"remarks",e.jsx(u,{type:"text",placeholder:"Enter Remarks"})),t&&(t===n.MATERIAL_ISSUE||t===n.R_D_PRODUCTS)&&o(a,"project_name",e.jsx(l,{placeholder:"Select Project",notFoundText:"No Project Found",options:Array.from({length:100},(s,r)=>({value:`Project ${r+1}`,label:`Project ${r+1}`}))})),o(a,"file",e.jsx(K,{size:"large"})),o(a,"from_range",e.jsx(u,{type:"number",placeholder:"From Range"})),o(a,"to_range",e.jsx(u,{type:"number",placeholder:"To Range"}))]}),e.jsx("h3",{className:"text-primary text-lg font-bold mt-5",children:"Warehouse"}),e.jsxs("div",{className:"flex gap-2 w-full",children:[o(a,"source_warehouse",e.jsx(l,{disabled:t&&t===n.MATERIAL_RECEIPT,placeholder:"Select Source Warehouse",notFoundText:"No Source Warehouse Found",options:Array.from({length:100},(s,r)=>({value:`Source Warehouse ${r+1}`,label:`Source Warehouse ${r+1}`}))})),o(a,"target_warehouse",e.jsx(l,{disabled:t&&(t===n.MATERIAL_ISSUE||t===n.R_D_PRODUCTS),placeholder:"Select Target Warehouse",notFoundText:"No Target Warehouse Found",options:Array.from({length:100},(s,r)=>({value:`Target Warehouse ${r+1}`,label:`Target Warehouse ${r+1}`}))}))]})]})},ne=({handleItemChange:a,appendTransferSerials:t,remove:s})=>[{key:"item_name",title:"Item Name",dataIndex:"item_name"},{key:"available_stock",title:"Available Stock",dataIndex:"available_stock"},{key:"assigned",title:"Assigned",dataIndex:"assigned"},{key:"qty",title:"Qty",dataIndex:"qty",render:(r,i,p)=>e.jsx(u,{type:"number",placeholder:"Enter Quantity",onChange:x=>{a(p,"qty",x.target.value)},size:"small"})},{key:"has_serial",title:"Has Serial",dataIndex:"has_serial",render:(r,i)=>e.jsx(X,{color:i.has_serial?"green":"red",children:i.has_serial?"Yes":"No"})},{key:"add_serials",title:"Add Serials",dataIndex:"add_serials",render:()=>e.jsx(c,{size:"middle",icon:e.jsx(Q,{}),onClick:()=>t({source_warehouse:"Baridhara Warehouse",item_name:"Tp Link",quantity:"10",serials:"1234567890",warranty_date:"10/10/2025"})})},{key:"actions",title:"Actions",dataIndex:"actions",render:(r,i)=>e.jsx("div",{className:"flex gap-2",children:e.jsx(c,{size:"small",icon:e.jsx(_,{}),color:"danger",variant:"solid",onClick:()=>s(i.id)})})}],le=({removeTransferSerials:a})=>[{key:"source_warehouse",title:"Source Warehouse",dataIndex:"source_warehouse"},{key:"item_name",title:"Item Name",dataIndex:"item_name"},{key:"quantity",title:"Quantity",dataIndex:"quantity"},{key:"serials",title:"Serials",dataIndex:"serials"},{key:"warranty_date",title:"Warranty Date",dataIndex:"warranty_date"},{key:"actions",title:"Actions",dataIndex:"actions",render:(t,s)=>e.jsx("div",{className:"flex gap-2",children:e.jsx(c,{size:"small",icon:e.jsx(_,{}),color:"danger",variant:"solid",onClick:()=>a(s.id)})})}],Ee=({id:a})=>{console.log(a);const t=Z(),{control:s,watch:r,reset:i,handleSubmit:p,setValue:x,getValues:k}=G({mode:"onChange",defaultValues:{items:[],transferSerials:[]}}),{fields:N,append:R,remove:C}=v({control:s,name:"items"}),{fields:F,append:w,remove:E}=v({control:s,name:"transferSerials"}),[h,f]=r(["from_range","to_range"]),$=h&&f&&+h<=+f?+f-+h+1:0,W=()=>{i({items:[],transferSerials:[]})},D=d=>{t.open({message:"Stock Entry Added Successfully",description:JSON.stringify(d)})},O=d=>{const m={id:Date.now().toString(),item_name:d,available_stock:"0",assigned:"0",qty:"1",has_serial:!1,add_serials:!1};R(m)},P=ne({handleItemChange:(d,m,V)=>{const y=[...k("items")];y[d]=I(A({},y[d]),{[m]:V}),x("items",y)},appendTransferSerials:w,remove:C}),z=le({removeTransferSerials:E});return e.jsxs("div",{className:"intro-y",children:[e.jsxs("div",{className:"flex justify-between items-center mt-5",children:[e.jsx("h2",{className:"text-2xl text-primary font-bold",children:"Add Stock Entry"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"text-lg text-primary font-semibold",children:["Total : ",$]}),e.jsx(c,{label:"Save",icon:e.jsx(re,{}),color:"orange",variant:"solid"}),a&&e.jsx(c,{label:"Delete",icon:e.jsx(_,{}),color:"danger",variant:"solid"}),e.jsx(c,{label:"Clear",icon:e.jsx(ee,{}),color:"danger",variant:"solid",onClick:W}),e.jsx(c,{label:"Submit",icon:e.jsx(te,{}),type:"primary",onClick:p(D)})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(oe,{control:s})}),e.jsx(b,{className:"mt-5",data:N,columns:P,title:()=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-center",children:"Items"}),e.jsx(l,{placeholder:"Add Item",notFoundText:"No Item Found",style:{width:200},options:Array.from({length:100},(d,m)=>({value:`Item ${m+1}`,label:`Item ${m+1}`})),onSelect:O})]}),pagination:!1}),e.jsx(b,{className:"mt-5",data:F,columns:z,title:()=>e.jsx("h3",{className:"text-lg font-bold",children:"Transfer Serials"}),pagination:!1})]})};export{Ee as default};

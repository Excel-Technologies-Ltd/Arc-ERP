import{j as e,c as v,r as c,u as k,d as w,L as S}from"./index-Bs2fFoTq.js";import{a as y}from"./purchase-CqI3Jmax.js";import{B as D}from"./index-BJMyXKcI.js";import{u as L}from"./index.esm-Bo6iHtQf.js";import{d as f,a as A}from"./helper-C7fgEP--.js";import"./index-BfK2uoct.js";import"./app-strings-BvIq5npe.js";import{L as m,S as T,P}from"./SerialAssignForm-BdG6fImE.js";import{T as R}from"./index-8vlpVxnD.js";import"./AntDatePicker-nhAZ6elL.js";import{u as V}from"./useNotify-D4k5WhO2.js";import"./pagination.utils-Dq4giu9F.js";import"./doctype-strings-C-G4L_vj.js";import"./bundle-mjs-Bbh6cNEC.js";import"./roundedArrow-BpmIDLu6.js";import"./useMergedState-BWzM43rH.js";import"./index-UFKEkCqV.js";import"./index-D0x3kUiQ.js";import"./index-DmeS3EO7.js";import"./AntSelect-BF2LFWnv.js";import"./LeftOutlined-4cHtBPKe.js";import"./AntInput-Bup3bFrv.js";import"./iconBase-CHnXMNis.js";import"./AntCustomTable-D1pMEnd8.js";import"./dropdown-UvdrxGN2.js";import"./RenderController-DPdF5Qev.js";import"./AntUpload-C5JMPZQG.js";import"./dropdownApi-CiZMrNdI.js";const $=({title:s="Details",items:t,className:a="",titleClassName:d="",itemClassName:u="",iconClassName:x="",valueClassName:n="",border:p=!0})=>e.jsxs("div",{className:`p-5 rounded-md bg-white shadow-sm border border-gray-200 dark:bg-darkmode-800 dark:border-darkmode-600 ${a}`,children:[s&&e.jsx("div",{className:`flex items-center pb-5 mb-5 ${p?"border-b border-slate-200/60 dark:border-darkmode-400":""}`,children:e.jsx("div",{className:`text-base font-medium truncate ${d}`,children:s})}),t.map((r,l)=>e.jsxs("div",{className:`flex items-center ${l>0?"mt-3":""} ${u}`,children:[r.icon&&e.jsx("span",{className:`w-4 h-4 mr-2 flex items-center justify-center ${x}`,children:r.icon}),e.jsxs("span",{className:"mr-1 text-slate-700 dark:text-slate-300",children:[r.label,":"]}),r.isLink?e.jsx("span",{className:`ml-1 underline decoration-dotted text-blue-600 dark:text-blue-400 ${n}`,children:r.value}):e.jsx("span",{className:`ml-1 text-slate-900 dark:text-slate-100 ${n}`,children:r.value})]},l))]}),F=({data:s})=>{var a;const t=[{icon:e.jsx(m,{className:"text-slate-500"}),label:"Invoice",value:s.name||"N/A",isLink:!0},{icon:e.jsx(m,{className:"text-slate-500"}),label:"Order",value:((a=s.items[0])==null?void 0:a.purchase_order)||"N/A",isLink:!0},{icon:e.jsx(m,{className:"text-slate-500"}),label:"Supplier",value:s.supplier_name||"N/A"},{icon:e.jsx(m,{className:"text-slate-500"}),label:"Posting Date",value:s.posting_date||"N/A"},{icon:e.jsx(m,{className:"text-slate-500"}),label:"Warehouse",value:s.set_warehouse||"N/A"},{icon:e.jsx(m,{className:"text-slate-500"}),label:"Status",value:e.jsx(R,{color:"blue",children:s.status||"Unknown"})}];return e.jsx(e.Fragment,{children:e.jsx($,{title:"Purchase Details",items:t})})},_=s=>{var t;return{warehouse:(t=s==null?void 0:s.set_warehouse)!=null?t:void 0,date:s!=null&&s.posting_date?f(s.posting_date):f(),file:void 0,fromRange:"",toRange:"",totalRangeValue:""}},ce=()=>{const{invoice_number:s}=v(),t=V(),{data:a,isLoading:d,isValidating:u}=y(s!=null?s:""),x=c.useMemo(()=>_(a),[a]),{control:n,watch:p,handleSubmit:r,setValue:l}=L({values:x,mode:"onChange",resetOptions:{keepDirtyValues:!0}}),[o,i]=p(["fromRange","toRange"]),{total:h,error:j}=c.useMemo(()=>A(o,i),[o,i]),b=k(w);c.useEffect(()=>{j&&o&&i&&t.error({message:j})},[j,o,i,t]),c.useEffect(()=>{o&&i&&l("totalRangeValue",h.toString(),{shouldValidate:!0,shouldDirty:!0})},[o,i,l,h]);const g=N=>{console.log({data:N,serialTableData:b})};return d||u?e.jsx(S,{pageLoader:!0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center mt-8 intro-y sm:flex-row",children:[e.jsx("h2",{className:"mr-auto text-lg font-medium",children:"Transaction Details"}),e.jsx("div",{className:"flex w-full mt-4 sm:w-auto sm:mt-0",children:e.jsx(D,{variant:"primary",className:"mr-2 shadow-md",onClick:r(g),children:"Submit"})})]}),e.jsxs("div",{className:"grid grid-cols-11 gap-5 mt-5",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-4 2xl:col-span-3 intro-y",children:[a&&e.jsx(F,{data:a}),e.jsxs("div",{className:"p-5 rounded-md box mt-5",children:[e.jsx("div",{className:"flex items-center pb-5 mb-5 border-b border-slate-200/60 dark:border-darkmode-400",children:e.jsx("div",{className:"text-base font-medium truncate",children:"Serial Assign"})}),e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx(T,{control:n,items:(a==null?void 0:a.items)||[]}),e.jsxs("p",{className:"text-lg text-primary",children:["Total : ",h]})]})]})]}),e.jsx("div",{className:"col-span-12 lg:col-span-7 2xl:col-span-8 intro-x",children:e.jsx(P,{data:a,control:n,setValue:l})})]})]})};export{ce as default};
